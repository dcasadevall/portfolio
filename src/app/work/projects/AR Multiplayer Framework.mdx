---
title: "Niantic Lightship Multiplayer Framework"
publishedAt: "2024-03-01"
summary: "Mobile and Web multiplayer framework for use with Niantic's Lightship SDK."
images:
  - "/images/projects/AR Multiplayer Framework/Shared AR.mp4"
team:
  - name: "Daniel Casadevall Pino"
    role: "Staff Software Engineer"
    avatar: "/images/dcp.png"
    linkedIn: "https://www.linkedin.com/in/dcasadevall/"
  - name: "Zhengping Wang"
    role: "Software Engineer"
    avatar: "/images/projects/AR Multiplayer Framework/zpw.jpeg"
    linkedIn: "https://www.linkedin.com/in/zhengpingwang/"
  - name: "Maoyang Li"
    role: "Software Engineer"
    avatar: "/images/projects/AR Multiplayer Framework/mli.jpeg"
    linkedIn: "https://www.linkedin.com/in/maoyangli/"
link: "http://nianticspatial.com/augment/shared-ar"
---

## Overview

This project consisted of two main components: First, replacing Pokemon Go's existing multiplayer backend service 
with a more efficient and cost-effective solution. The new backend service needed to maintain full compatibility 
with the existing Unity client API. Second, I developed a new web-based 
multiplayer AR framework from scratch, creating a React A-Frame API that enables developers to create web-based 
multiplayer AR applications using 8thwall's web editor. This framework includes advanced features like clock 
synchronization and client interpolation, making it possible to create sophisticated multiplayer AR experiences 
directly in the browser.

## Key Features

- **Scalable Architecture**: Designed and implemented a streamlined multiplayer service that significantly reduced operational costs while maintaining high performance and reliability.
- **Unity API Compatibility**: Maintained full feature parity with the existing Unity mobile client API, ensuring seamless transition for mobile applications.
- **Web AR Integration**: Created a comprehensive React A-Frame API that bridges the gap between web technologies and AR capabilities, enabling developers to create experiences similar to [Hot Pot Hop](https://8thwall.8thwall.app/hot-pot-hop/).
- **Real-time Synchronization**: Implemented robust clock synchronization and client interpolation systems to ensure smooth multiplayer experiences across both mobile and web platforms.
- **Cross-Platform Support**: Developed a unified backend that seamlessly supports both Unity mobile clients and web-based AR applications.

## Technologies Used

- **Node.js**: For building the scalable backend infrastructure.
- **Unity**: For maintaining mobile client API compatibility.
- **React**: For creating the web-based development framework.
- **A-Frame**: For implementing WebXR capabilities and AR features.
- **8thwall**: For leveraging advanced AR capabilities in web browsers, utilizing their [Shared AR modules](https://www.8thwall.com/8thwall/modules/shared-ar/release-notes/).
- **WebSocket**: For real-time communication between clients and server.

## Challenges and Learnings

The primary challenge was replacing a complex, production-scale system while maintaining compatibility with existing Unity clients and introducing web support simultaneously. This required careful API design to support both platforms effectively. Implementing precise synchronization mechanisms for AR experiences across different platforms demanded deep understanding of networking principles and creative solutions for handling latency and state management. Additionally, ensuring consistent behavior between Unity and web clients required extensive cross-platform testing and optimization.

## Outcome

The new multiplayer framework successfully replaced the legacy system, resulting in significantly reduced operational costs and improved maintainability. The framework now serves both Unity mobile clients and web-based AR applications through a unified backend. The addition of the React A-Frame API has enabled developers to create sophisticated multiplayer AR experiences for the web platform, expanding the reach of AR applications beyond native mobile apps. This project demonstrated the importance of architectural simplicity and the potential of cross-platform solutions in delivering complex AR experiences.

---

Comments go here (not visible in the UI)