---
title: "Niantic Server Authority Framework"
publishedAt: "2024-03-01"
summary: "A server-authoritative multiplayer framework for AR games with client prediction and state reconciliation."
images:
  - "/images/side-projects/Server Authority Framework/arsim-demo.mp4"
aspectRatio: "4/3"
team:
  - name: "Daniel Casadevall Pino"
    role: "Staff Software Engineer"
    avatar: "/images/dcp.png"
    linkedIn: "https://www.linkedin.com/in/dcasadevall/"
textOverlays:
  - title: "Server Authority"
    subtitle: "Secure state validation and synchronization across all clients"
    startTime: 0
    duration: 5
  - title: "Client Prediction"
    subtitle: "Smooth gameplay through advanced prediction techniques"
    startTime: 7
    duration: 5
  - title: "State Reconciliation"
    subtitle: "Seamless state rollback and correction when needed"
    startTime: 14
    duration: 5
  - title: "AR Integration"
    subtitle: "Full compatibility with Niantic's AR capabilities"
    startTime: 21
    duration: 5
---

## Overview

This project focused on developing a robust server-authoritative multiplayer framework for AR games. The framework 
enables developers to maintain consistent game state across all clients while providing smooth gameplay through 
advanced prediction techniques. By implementing server-side validation of client states and sophisticated 
synchronization mechanisms, the framework ensures fair and cheat-resistant gameplay while maintaining responsive 
user experiences.

## Key Features

- **Server Authority**: Implemented a Java-based Entity Component System (ECS) mirroring Unity's client-side architecture for seamless state validation and replication.
- **Client Prediction**: Developed comprehensive APIs for client-side prediction techniques, including interpolation and dead reckoning for smooth object movement.
- **State Synchronization**: Created robust clock synchronization systems to maintain temporal consistency across all clients.
- **State Reconciliation**: Implemented client state rollback mechanisms to handle server corrections while maintaining gameplay fluidity.
- **AR Integration**: Full integration with Niantic's AR client capabilities for immersive multiplayer experiences.

## Technologies Used

- **Java**: For the server-side ECS implementation.
- **Unity**: For client-side implementation and AR integration.
- **Entity Component System**: Both server-side and client-side for consistent architecture.
- **WebSocket**: For real-time communication between server and clients.
- **Niantic Lightship SDK**: For AR functionality integration.

## Challenges and Learnings

The primary challenge was designing a system that could maintain server authority while providing a smooth, 
low-latency experience for players. This required careful balance between client prediction and server 
validation, along with sophisticated state reconciliation mechanisms. Implementing the server-side ECS to mirror 
Unity's architecture demanded deep understanding of both platforms and careful API design to ensure seamless 
integration.

## Outcome

The framework successfully provides developers with a powerful toolset for creating server-authoritative 
multiplayer AR experiences. The combination of server-side validation with client-side prediction techniques 
enables the creation of responsive, fair, and secure multiplayer games. The system's modular design, including 
ready-to-use components like the Bounding Box System and Lerping System, significantly reduces development time 
for new multiplayer AR applications.